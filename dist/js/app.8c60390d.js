(function(e){function t(t){for(var i,n,s=t[0],c=t[1],v=t[2],l=0,f=[];l<s.length;l++)n=s[l],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&f.push(o[n][0]),o[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,v||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],i=!0,s=1;s<r.length;s++){var c=r[s];0!==o[c]&&(i=!1)}i&&(a.splice(t--,1),e=n(n.s=r[0]))}return e}var i={},o={app:0},a=[];function n(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var v=0;v<s.length;v++)t(s[v]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0029":function(e,t,r){},"17f2":function(e,t,r){"use strict";var i=r("9a00"),o=r.n(i);o.a},"1b03":function(e,t,r){},2438:function(e,t,r){"use strict";var i=r("a12c"),o=r.n(i);o.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("app-header"),r("router-view")],1)},a=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col col-sm-12"},[r("nav",{staticClass:"navbar navbar-inverse"},[r("div",{staticClass:"container-fluid"},[r("ul",{staticClass:"nav navbar-nav"},[r("router-link",{attrs:{to:{name:"main"},tag:"li","active-class":"active"}},[r("a",{attrs:{href:"#"}},[e._v("Главная")])]),r("router-link",{attrs:{to:{name:"favorites"},tag:"li","active-class":"active"}},[r("a",{attrs:{href:"#"}},[e._v("Избранное")])])],1)])])])])])])},s=[],c={name:"Header"},v=c,u=r("2877"),l=Object(u["a"])(v,n,s,!1,null,null,null),f=l.exports,m={components:{AppHeader:f}},d=m,p=(r("5c0b"),Object(u["a"])(d,o,a,!1,null,null,null)),b=p.exports,h=r("8c4f"),y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[e.loading?r("loader"):e._e(),e.loading?e._e():r("div",{staticClass:"col col-sm-12"},[r("div",{key:e.reverse?"sort-amount-desc":"sort-amount-asc",staticClass:"filter"},[e._v(" Сортировать по "+e._s(e.reverse?"убыванию":"возрастанию")+" "),r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.reverseMovies(t)}}},[r("i",{staticClass:"fa opacity-50",class:{"fa-sort-amount-asc":!e.reverse,"fa-sort-amount-desc":e.reverse}})])]),r("div",e._l(e.movies,(function(e){return r("movie-item",{key:e.imdbID,attrs:{movie:e}})})),1)])],1)])])},O=[],_=(r("a4d3"),r("4de4"),r("4160"),r("d81d"),r("26e9"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("3ca3"),r("159b"),r("ddb0"),r("2fa7")),g=r("2f62"),j=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},w=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-md-12 bg"},[r("div",{staticClass:"loader",attrs:{id:"loader-1"}})])}],P={name:"Loader"},C=P,k=(r("c4ae"),Object(u["a"])(C,j,w,!1,null,null,null)),F=k.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"item"},[r("div",{staticClass:"item-img"},[r("img",{attrs:{src:e.movie.Poster}})]),r("div",{staticClass:"item-info"},[r("h4",{staticClass:"item-info__title"},[e._v(" "+e._s(e.movie.Title)+" ")]),r("div",{staticClass:"item-info__description"},[e._v(" "+e._s(e.movie.Plot)+" ")]),r("ul",{staticClass:"item-info__about"},[r("li",{staticClass:"item-info__about-item"},[r("span",[e._v("Жанр: "+e._s(e.movie.Genre))])]),r("li",{staticClass:"item-info__about-item"},[r("span",[e._v("Режисёр: "+e._s(e.movie.Director))])]),r("li",{staticClass:"item-info__about-item"},[r("span",[e._v("Страна: "+e._s(e.movie.Country))])]),r("li",{staticClass:"item-info__about-item"},[r("span",[e._v("В ролях: "+e._s(e.movie.Actors))])])])]),r("div",{staticClass:"item-right"},[r("div",{staticClass:"item-info__rating"},[e._v(" Рейтинг: "+e._s(e.movie.imdbRating)+" ")]),e.favoritesKeys.includes(e.movie.imdbID)?e._e():r("div",{key:"add-favorites",staticClass:"item-info__favorites"},[e._v(" Добавить в избранное "),r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.addToFavorites(e.movie.imdbID)}}},[r("i",{staticClass:"fa fa-star-o"})])]),e.favoritesKeys.includes(e.movie.imdbID)?r("div",{key:"remove-favorites",staticClass:"item-info__favorites"},[e._v(" В избранном "),r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.removeFromFavorites(e.movie.imdbID)}}},[r("i",{staticClass:"fa fa-star"})])]):e._e()])])},M=[];function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(r,!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E={name:"MovieItem",props:{movie:{type:Object,required:!0}},computed:$({},Object(g["b"])({favoritesKeys:"favoritesKeys"})),methods:{addToFavorites:function(e){this.$store.dispatch("addToFavorites",{id:e,callback:this.callbackAddToFavorites})},callbackAddToFavorites:function(){this.$toasted.success("Фильм успешно добавлен в избранное")},removeFromFavorites:function(e){this.$store.dispatch("removeFromFavorites",{id:e,callback:this.callbackRemoveFromFavorites})},callbackRemoveFromFavorites:function(){this.$toasted.success("Фильм успешно убран из избранного")}}},I=E,T=(r("e60d"),Object(u["a"])(I,D,M,!1,null,null,null)),S=T.exports;function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(r,!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L={name:"Main",components:{Loader:F,MovieItem:S},data:function(){return{loading:!1,bestMovies:["tt0111161","tt0068646","tt0468569","tt0071562","tt0167260","tt0110912","tt0108052","tt0050083","tt7286456","tt1375666"],reverse:!1}},computed:R({},Object(g["b"])({movies:"movies"})),created:function(){var e=this;this.movies.length||(this.loading=!0,Promise.all(this.bestMovies.map((function(t){return e.fetchMovie(t)}))).then((function(){e.loading=!1,e.$toasted.success("Фильмы успешно загружены")}),(function(t){console.log(t),e.$toasted.error("При загрузке произошла ошибка"+(t.message?": "+t.message:"")),e.loading=!1})))},methods:{fetchMovie:function(e){var t=this;return new Promise((function(r,o){i["a"].axios.get("",{params:{i:e}}).then((function(e){var i=e.data;"True"===i.Response?(t.$store.dispatch("movieLoaded",{movie:i}),r()):o(i.Error)})).catch((function(e){o(e)}))}))},reverseMovies:function(){this.$store.dispatch("reverseMovies"),this.reverse=!this.reverse}}},A=L,q=(r("17f2"),Object(u["a"])(A,y,O,!1,null,null,null)),H=q.exports,J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col col-sm-12"},[e.favorites.length?e._e():r("div",{staticClass:"info-container"},[r("div",[e._v(" На данный момент у вас не добавлено ни одного фильма в избранное ")]),r("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"main"},"active-class":"active"}},[e._v(" К списку фильмов ")])],1),e.favorites.length?r("div",e._l(e.favorites,(function(e){return r("movie-item",{key:e.imdbID,attrs:{movie:e}})})),1):e._e()])])])])},G=[];function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(r,!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B={name:"Favorites",components:{MovieItem:S},computed:z({},Object(g["b"])({favorites:"favorites"}))},N=B,Q=(r("2438"),Object(u["a"])(N,J,G,!1,null,null,null)),V=Q.exports;i["a"].use(h["a"]);var W=[{path:"/",redirect:"/main"},{path:"/main",name:"main",component:H},{path:"/favorites",name:"favorites",component:V}],X=new h["a"]({mode:"history",base:"/",routes:W}),Y=X,Z=(r("7db0"),r("c740"),r("4e82"),r("a434"),r("284c"));i["a"].use(g["a"]);var ee=new g["a"].Store({state:{movies:[],favorites:[],favoritesKeys:[]},getters:{movies:function(e){return e.movies},favorites:function(e){return e.favorites},favoritesKeys:function(e){return e.favoritesKeys}},mutations:{setMovie:function(e,t){var r=t.movie,i=Object(Z["a"])(e.movies);i.push(r),e.movies=i.sort((function(e,t){return t.imdbRating-e.imdbRating}))},reverseMovies:function(e){e.movies=e.movies.reverse()},addToFavorites:function(e,t){var r=t.id,i=t.callback;e.favoritesKeys.push(r),e.favorites.push(e.movies.find((function(e){var t=e.imdbID;return t===r}))),i()},removeFromFavorites:function(e,t){var r=t.id,i=t.callback,o=e.favoritesKeys.findIndex((function(e){return e===r}));e.favoritesKeys.splice(o,1);var a=e.favorites.findIndex((function(e){var t=e.imdbID;return t===r}));e.favorites.splice(a,1),i()}},actions:{movieLoaded:function(e,t){e.commit("setMovie",t)},reverseMovies:function(e){e.commit("reverseMovies")},addToFavorites:function(e,t){e.commit("addToFavorites",t)},removeFromFavorites:function(e,t){e.commit("removeFromFavorites",t)}}}),te=r("bc3a"),re=r.n(te),ie=r("a7fe"),oe=r.n(ie),ae=r("a65d"),ne=r.n(ae);i["a"].use(oe.a,re.a);var se={position:"bottom-center",duration:2e3};i["a"].use(ne.a,se),i["a"].axios.defaults.baseURL="http://www.omdbapi.com/",i["a"].axios.interceptors.request.use((function(e){return"get"===e.method&&(e.hasOwnProperty("params")||(e.params={}),e.params["apikey"]="f0f90c36"),e})),i["a"].config.productionTip=!1,new i["a"]({router:Y,store:ee,render:function(e){return e(b)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var i=r("9c0c"),o=r.n(i);o.a},"9a00":function(e,t,r){},"9c0c":function(e,t,r){},a12c:function(e,t,r){},c4ae:function(e,t,r){"use strict";var i=r("1b03"),o=r.n(i);o.a},e60d:function(e,t,r){"use strict";var i=r("0029"),o=r.n(i);o.a}});
//# sourceMappingURL=app.8c60390d.js.map